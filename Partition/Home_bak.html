<div class="home page bdbg" style="  ">
    <style>
        .barcolor2 {
            /* Permalink - use to edit and share this gradient: http://colorzilla.com/gradient-editor/#e2e2e2+0,dbdbdb+50,d1d1d1+51,fefefe+100;Grey+Gloss+%231 */
            background: #e2e2e2; /* Old browsers */
            background: -moz-linear-gradient(top, #e2e2e2 0%, #dbdbdb 50%, #d1d1d1 51%, #fefefe 100%); /* FF3.6-15 */
            background: -webkit-linear-gradient(top, #e2e2e2 0%,#dbdbdb 50%,#d1d1d1 51%,#fefefe 100%); /* Chrome10-25,Safari5.1-6 */
            background: linear-gradient(to bottom, #e2e2e2 0%,#dbdbdb 50%,#d1d1d1 51%,#fefefe 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
            filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#e2e2e2', endColorstr='#fefefe',GradientType=0 ); /* IE6-9 */
        }

        .barcolor {
            /* Permalink - use to edit and share this gradient: http://colorzilla.com/gradient-editor/#29b8e5+0,b3dced+38,0082b2+72&1+0,1+67,0+72 */
            background: -moz-radial-gradient(center, ellipse cover, rgba(41,184,229,1) 0%, rgba(179,220,237,1) 38%, rgba(26,143,187,1) 67%, rgba(0,130,178,0) 72%); /* FF3.6-15 */
            background: -webkit-radial-gradient(center, ellipse cover, rgba(41,184,229,1) 0%,rgba(179,220,237,1) 38%,rgba(26,143,187,1) 67%,rgba(0,130,178,0) 72%); /* Chrome10-25,Safari5.1-6 */
            background: radial-gradient(ellipse at center, rgba(41,184,229,1) 0%,rgba(179,220,237,1) 38%,rgba(26,143,187,1) 67%,rgba(0,130,178,0) 72%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
            filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#29b8e5', endColorstr='#000082b2',GradientType=1 ); /* IE6-9 fallback on horizontal gradient */
        }

        .weui-navbar__item2 {
            position: relative;
            display: block;
            flex: 1;
            padding: 6px 0;
            text-align: center;
            font-size: 15px;
            -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
        }

            .weui-navbar__item2:active {
                background-color: #dCdCdC;
                border-radius: 3em;
            }

            .weui-navbar__item2.weui-bar__item_on {
                background-color: #dCdCdC;
                border-radius: 3em;
            }

            .weui-navbar__item2:after {
                content: " ";
                position: absolute;
                right: 0;
                top: 0;
                width: 1px;
                bottom: 0;
                color: #CCCCCC;
                transform-origin: 100% 0;
                transform: scaleX(0.5);
            }

            .weui-navbar__item2:last-child:after {
                display: none;
            }

        .weui-grid2 {
            /* 防止多列布局，分页媒体和多区域上下文中的意外中断 */
            break-inside: avoid;
            background: #fff;
            touch-action: pan-y !important
        }

            .weui-grid2 p {
                padding: 5px 10px;
            }

            .weui-grid2 div {
                padding-bottom: 10px
            }

        .weui-grid__label2 {
            text-align: left;
            color: #000000;
            font-size: 14px;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .skilllabel {
            margin: 0 auto;
            padding: 5px 10px;
            text-align: center;
            font-size: 12px;
            border-radius: 3em;
            background-color: rgb(196, 246, 252);
            color: blue;
        }

        .weui-grids2 {
            margin: 0 auto;
            width: 100%;
            column-count: 1;
            column-width: 20px;
            column-gap: 10px;
        }
    </style>
    <div class="page__hd " style="height:25%;padding:0;margin:0;">
        <div class="swiper-container" style="">
            <div class="swiper-wrapper">
                <div class="swiper-slide" style="position:relative;background-image: url('http://img3.tuwandata.com/uploads/play2/banner/8997181550401038.jpg');width:100%;height:100%;background-repeat:no-repeat;-webkit-background-size:auto 100%  ;background-position:center;"></div>
                <div class="swiper-slide" style="position:relative;background-image: url('http://img3.tuwandata.com/uploads/play2/banner/2707491549808792.jpg');width:100%;height:100%;background-repeat:no-repeat;-webkit-background-size:auto 100% ;background-position:center;"></div>
                <div class="swiper-slide" style="position:relative;background-image: url('http://img3.tuwandata.com/uploads/play2/banner/1533301546838800.jpg');width:100%;height:100%;background-repeat:no-repeat;-webkit-background-size:auto 100% ;background-position:center;"></div>
                <div class="swiper-slide" style="position:relative;background-image: url('http://img3.tuwandata.com/uploads/play2/banner/1117371550057421.jpg');width:100%;height:100%;background-repeat:no-repeat;-webkit-background-size:auto 100% ;background-position:center;"></div>

            </div>
            <!-- Add Pagination -->
            <div class="swiper-pagination"></div>
            <!-- Add Arrows -->

        </div>

    </div>
    <div class="page__bd">
        <div class="weui-tab">
            <div class="weui-navbar" style="background-color:transparent">
                <div class="weui-navbar__item2 weui-bar__item_on">
                    推薦
                </div>
                <div class="weui-navbar__item2">
                    關注
                </div>
                <div class="weui-navbar__item2">

                </div>
                <div class="weui-navbar__item2">

                </div>
                <div class="weui-navbar__item2 barcolor" style="filter: drop-shadow(5px 5px 5px rgba(0, 0, 0, 0.7))" onclick="clicknav(this)" bparam="" btag="AddNews">
                    <i alt="" class="fa fa-2x fa-plus " style="width:100%;font-size:15px;color:darkblue"> 動態</i>
                </div>
            </div>

            <div class="weui-tab__panel">
                <div class="weui-grids2" binfo="cardlist" style="column-count:2;touch-action:pan-y">



                </div>
            </div>

        </div>

    </div>
    <div class="page__ft ">

    </div>

    <script type="text/html" id="infocard">
        <div style="padding-bottom:10px">
            <div class="weui-grid2" onclick="hovernav(this,'id')" btag="NewsPage">

                <div style="width:100%;height:20px;padding:10px 10px;color:gray;">
                    <img binfo="memberimg" style=" border-radius: 0.3em;height:auto;width:auto;max-width:20px;max-height:20px;float:left" src="https://f.gxx.garenanow.com/download/f799cda559ef067aac48bf11b0b4e184040301000000af1a000000000201007c" alt="">
                    <span binfo="name" style="padding-left:10px;font-size:12px;width:50%;float:left">萌王♥神神💗</span>

                </div>
                <div class="either-gif-or-video">

                    <video binfo="newstitleV" style="padding-left:2%;width:96%;height:auto" src="image.mp4" autoplay loop muted playsinline webkit-playsinline></video>
                    <img binfo="newstitleimg" style="padding-left:2%;width:96%;height:auto" src="image.gif">
                </div>
                <p class="weui-grid__label2">
                    <span binfo="newstitle" style="width:90%;display : inline-block;text-overflow: ellipsis;overflow:hidden;white-space:nowrap">測試標題</span>
                    <span style="color:gray;font-size:12px;float:right">
                        <i alt="" binfo="followicon" class="fa fa-1x fa-heart-o" style="font-size:18px"></i>
                        <span binfo="followcount">0</span>
                    </span>
                </p>
                <div class="skillinfo" style="width:100%;text-align:center;"><span class="skilllabel" style="width:80%;display : inline-block;text-overflow: ellipsis;overflow:hidden;white-space:nowrap">英雄聯盟 200元/1小時</span></div>

            </div>
        </div>


    </script>
    <script id="tmpcard">

    </script>
    <script>
     
        var data = JSON.parse("{{data}}");
        $(function () {

           // alert(data);
            var swiper = new Swiper('.swiper-container', {
                spaceBetween: 30,
                centeredSlides: true,
                autoplay: {
                    delay: 2500,
                    disableOnInteraction: false,
                },
                pagination: {
                    el: '.swiper-pagination',
                    clickable: true,
                },

            });

            $("div[binfo=cardlist]").empty();
            for (var i = 0; i < data.length; i++) {
                var item = data[i];
                var $html = $($("#infocard").html());
                $html.find(".weui-grid2").attr("onclick", 'hovernav(this,\'' + item.Member_News_ID + '\')');
                $html.find("[binfo=memberimg]").attr("src", item.Member.Img);
                $html.find("[binfo=name]").text(item.Member.Name);
                $html.find("[binfo=newstitle]").text(item.Content);

                $html.find("[binfo=followcount]").text(item.LikeCount);
                if (item.Liked) {
                    $html.find("[binfo=followicon]").removeClass("fa-heart-o")
                    $html.find("[binfo=followicon]").addClass("fa-heart")
                    $html.find("[binfo=followicon]").css("color","red")
                }
                if (item.SkillInfo) {
                    $html.find(".skillinfo span").text(item.SkillInfo.Name + " " + item.SkillInfo.Fee + "元/" + item.SkillInfo.Unit);
                } else {
                    $html.find(".skillinfo").hide();
                }

                var imgobj = JSON.parse(item.ImgList);
                if (imgobj.Video != "") {
                    //$html.find("[binfo=newstitleimg]").css("display", "none");
                    $html.find("[binfo=newstitleV]").attr("src", imgobj.Video);
                    $html.find("[binfo=newstitleimg]").css("display", "none");
                } else if (imgobj.Img.length > 0) {
                    $html.find("[binfo=newstitleimg]").attr("src",imgobj.Img[0]);
                    $html.find("[binfo=newstitleV]").css("display", "none");
                } else {
                    $html.find("[binfo=newstitleimg]").css("display", "none");
                    $html.find("[binfo=newstitleV]").css("display", "none");
                }


                $("div[binfo=cardlist]").append($html);

            }

            var mc = new Hammer.Manager($("div[binfo=cardlist]")[0]);



            mc.set({ "touchAction": "pan-y" });
            var pinch = new Hammer.Pinch();
            mc.add([pinch]);


            var nowc = 2;
            mc.on("pinch", function (ev) {

                if (ev.scale < 0.7) {

                    if ($("div[binfo=cardlist]").css("column-count") < 4) {

                        $("div[binfo=cardlist]").css("column-count", parseInt($("div[binfo=cardlist]").css("column-count")) + 1)
                        $("#tmpcard").html($("div[binfo=cardlist]").html());
                        $("div[binfo=cardlist]").empty()
                        $("div[binfo=cardlist]").html($("#tmpcard").html())
                    }

                } else if (ev.scale > 1.3) {
                    if ($("div[binfo=cardlist]").css("column-count") > 1) {

                        $("div[binfo=cardlist]").css("column-count", parseInt($("div[binfo=cardlist]").css("column-count")) - 1)
                        $("#tmpcard").html($("div[binfo=cardlist]").html());
                        $("div[binfo=cardlist]").empty()
                        $("div[binfo=cardlist]").html($("#tmpcard").html())
                    }
                }
               // console.dir($("div[binfo=cardlist]").css("column-count"))
            });
        })

    </script>
</div>
